<!-- Loading -->
<ng-template #customLoadingTemplate>
  <div class="custom-class"> </div>
</ng-template>
<br> <br> 

<!-- loading --> 
<ngx-loading [show]="stopLoading" [config]="{ backdropBackgroundColour: 'rgba(255, 255, 255, 0.2)',backdropBorderRadius: '3px', primaryColour: 'rgb(46,184,184)', secondaryColour: 'rgb(46,184,184)', tertiaryColour: 'rgb(46,184,184)' }"
  [template]="customLoadingTemplate"></ngx-loading>

  <!-- Form -->
  <div class="register-page">
    <div class="form">
      <img src="assets/images/logoAhva.png" class="img-logo">
      <h1>ברוך הבא</h1>
      <h2>הרשמה</h2>
      <br>

      <!-- alert -->
<div class="div-horizontal">
  <div *ngIf="ansFromServer" class="alert alert-{{ alertType }} alert-dismissible">
    <a href="register.component.html" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    <strong> {{ alertMsg }}</strong>
  </div>
</div>
      <form [formGroup]="registerForm" (ngSubmit)="insertUser()" accept-charset="UTF-8">

      <!-- User Name Field -->
        <div class="form-group">
            <span class="required-mark"> * </span>
          <input #userName type="text" formControlName="userName" name="userName" id="userName" placeholder="הזן שם משתמש"
            class="form-control" dir="rtl" [ngClass]="{ 'is-invalid': submitted && f.userName?.errors }">
          <div *ngIf="submitted && f.userName?.errors" class="invalid-feedback">
            <div class="error1" *ngIf="f.userName.errors.required">אנא הכנס שם משתמש</div>
          </div>
        </div>

        <!-- Password Field -->
        <div class="form-group">
            <span class="required-mark"> * </span>
          <input #Password type="Password" formControlName="Password" name="Password" id="Password" placeholder="הזן סיסמה"
            class="form-control" dir="rtl" [ngClass]="{ 'is-invalid': submitted && f.Password?.errors }">
          <div *ngIf="submitted && f.Password?.errors" class="invalid-feedback">
            <div class="error1" *ngIf="f.Password.errors.required">אנא הכנס סיסמה</div>
            <div class="error1" *ngIf="f.Password.errors.minlength">הסיסמא חייבת להכיל לפחות 6 תווים</div>
          </div>
        </div>

        <!-- Comfirm Password Field  -->
        <div class="form-group">
            <span class="required-mark"> * </span>
          <input #confirmPassword type="Password" formControlName="confirmPassword" name="confirmPassword" id="confirmPassword" placeholder="אשר סיסמה"
            class="form-control" dir="rtl" [ngClass]="{ 'is-invalid': submitted && f.confirmPassword?.errors }">
          <div *ngIf="submitted && f.confirmPassword?.errors" class="invalid-feedback">
            <div class="error1" *ngIf="f.confirmPassword.errors.required">אנא הכנס סיסמה</div>
            <div class="error1" *ngIf="f.confirmPassword.errors.mustMatch">הסיסמאות חייבות להיות זהות</div>
          </div>
        </div>
 
        <!-- Email Field -->
        <div class="form-group">
            <span class="required-mark"> * </span>
          <input #Email type="text" [(ngModel)]="newUser.Email" formControlName="Email"  id="Email" placeholder="הזן כתובת אימייל"
          [className]="emailVaild ? 'form-control is-valid' : 'form-control is-invalid'" dir="rtl" class="form-control" 
            [ngClass]="{ 'is-invalid': submitted && f.Email?.errors }" name="Email" (ngModelChange) = "checkEmail()" required>
            
            <div [className]="emailVaild ? 'valid-feedback' : 'invalid-feedback'" id="validationName">            
                <div>{{ EmailError }}</div>
            </div>
            <div *ngIf="submitted && f.Email?.errors" class="invalid-feedback">
            <div class="error1" *ngIf="f.Email.errors.required">אנא הכנס אימייל</div>
            <div class="error1" *ngIf="f.Email.errors.email"> כתובת האימייל חייבת להיות כתובת דוא"ל חוקית</div>
          </div>
        </div>

        <body>

          <!-- submit button and going to login page -->
          <!-- <button type=button class="btn btn-primary"  (click)="clickMethod('')"> <a href="login">כניסה</a></button> -->
          <button id="submitType" class="btn btn-primary" type="submit"> כניסה </button>
          
          <!-- back to login page without registration -->
          <!-- <a href="login" id="backToLogin">חזרה</a> -->

        </body>
      <!-- </form> -->
    </form> <br>

    



    </div>
  </div> 

